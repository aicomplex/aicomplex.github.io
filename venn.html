// Function to draw pixelated text with 3D effect
function drawPixelText(text, x, y) {
  const pixelSize = 10; // Large text size
  context.fillStyle = 'white';
  
  // Pixel patterns for letters
  const letters = {
    'A': [
      [0,1,1,0],
      [1,0,0,1],
      [1,1,1,1],
      [1,0,0,1],
      [1,0,0,1]
    ],
    'I': [
      [1,1,1],
      [0,1,0],
      [0,1,0],
      [0,1,0],
      [1,1,1]
    ],
    'C': [
      [0,1,1,1],
      [1,0,0,0],
      [1,0,0,0],
      [1,0,0,0],
      [0,1,1,1]
    ],
    'S': [
      [0,1,1,1],
      [1,0,0,0],
      [0,1,1,0],
      [0,0,0,1],
      [1,1,1,0]
    ]
  };
  
  // First draw gray shadow for 3D effect
  context.fillStyle = '#555555';
  let shadowX = x + 3;
  let shadowY = y + 3;
  
  for (let i = 0; i < text.length; i++) {
    const letter = text[i];
    if (letters[letter]) {
      const pattern = letters[letter];
      
      // Draw shadow pixel by pixel
      for (let row = 0; row < pattern.length; row++) {
        for (let col = 0; col < pattern[row].length; col++) {
          if (pattern[row][col] === 1) {
            context.fillRect(
              shadowX + col * pixelSize,
              shadowY + row * pixelSize,
              pixelSize,
              pixelSize
            );
          }
        }
      }
      
      // Move to the next letter position
      shadowX += (pattern[0].length + 2) * pixelSize;
    }
  }
  
  // Now draw the white text on top
  context.fillStyle = 'white';
  let currentX = x;
  
  for (let i = 0; i < text.length; i++) {
    const letter = text[i];
    if (letters[letter]) {
      const pattern = letters[letter];
      
      // Draw the letter pixel by pixel
      for (let row = 0; row < pattern.length; row++) {
        for (let col = 0; col < pattern[row].length; col++) {
          if (pattern[row][col] === 1) {
            context.fillRect(
              currentX + col * pixelSize,
              y + row * pixelSize,
              pixelSize,
              pixelSize
            );
          }
        }
      }
      
      // Move to the next letter position
      currentX += (pattern[0].length + 2) * pixelSize;
    }
  }
}

// Draw a more pixelated paddle with 3D effect
function drawPaddle(paddle, isLeft) {
  // Draw gray shadow for 3D effect
  context.fillStyle = '#555555';
  
  // Draw paddle shadow as a grid of pixels
  for (let y = 0; y < paddle.height; y += 3) {
    for (let x = 0; x < paddle.width; x += 3) {
      context.fillRect(paddle.x + x + 3, paddle.y + y + 3, 3, 3);
    }
  }
  
  // Draw the white paddle on top
  context.fillStyle = 'white';
  
  // Draw paddle as a grid of pixels
  for (let y = 0; y < paddle.height; y += 3) {
    for (let x = 0; x < paddle.width; x += 3) {
      context.fillRect(paddle.x + x, paddle.y + y, 3, 3);
    }
  }
}

// Draw the court with more detailed pixel art and 3D effects
function drawCourt() {
  // Top and bottom walls with 3D effect
  
  // Draw gray shadows for 3D effect
  context.fillStyle = '#555555';
  
  // Shadow for top wall
  for (let x = 0; x < canvas.width; x += 3) {
    context.fillRect(x + 3, 3, 3, grid);
  }
  
  // Shadow for bottom wall
  for (let x = 0; x < canvas.width; x += 3) {
    context.fillRect(x + 3, canvas.height - grid + 3, 3, grid);
  }
  
  // Now draw the white walls
  context.fillStyle = 'white';
  
  // Pixelated top wall
  for (let x = 0; x < canvas.width; x += 3) {
    context.fillRect(x, 0, 3, grid);
  }
  
  // Pixelated bottom wall
  for (let x = 0; x < canvas.width; x += 3) {
    context.fillRect(x, canvas.height - grid, 3, grid);
  }
  
  // Center line with pixelated dashes
  const dashHeight = grid / 2;
  const gapHeight = grid;
  
  for (let y = grid * 1.5; y < canvas.height - grid * 1.5; y += dashHeight + gapHeight) {
    // Each dash is made of small pixel blocks
    for (let py = 0; py < dashHeight; py += 3) {
      context.fillRect(canvas.width / 2 - 1, y + py, 2, 3);
    }
  }
  
  // Draw pixelated "AI" text on the left side with 3D effect
  drawPixelText("AI", canvas.width / 4 - 60, 70);
  
  // Draw pixelated "CS" text on the right side with 3D effect
  drawPixelText("CS", canvas.width * 3/4 - 60, 70);
}